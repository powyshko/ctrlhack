(function(t){function e(e){for(var s,l,r=e[0],i=e[1],c=e[2],m=0,f=[];m<r.length;m++)l=r[m],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&f.push(o[l][0]),o[l]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);u&&u(e);while(f.length)f.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,r=1;r<a.length;r++){var i=a[r];0!==o[i]&&(s=!1)}s&&(n.splice(e--,1),t=l(l.s=a[0]))}return t}var s={},o={app:0},n=[];function l(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=s,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(a,s,function(e){return t[e]}.bind(null,s));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/ctrlhack/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],i=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=i;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0496":function(t,e,a){},"152d":function(t,e,a){"use strict";a("a930")},"56c8":function(t,e,a){"use strict";a("0496")},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("h1",[t._v("Default")]),e("the-default-log"),e("h1",[t._v("Vuex")]),e("the-vuex-log")],1)},n=[],l=function(){var t=this,e=t._self._c;return e("base-card",{staticClass:"the-default-log"},[e("form",{staticClass:"the-default-log__row"},[e("div",{staticClass:"the-default-log__row-item"},[e("base-input",{attrs:{label:"Цена",placeholder:"Введите цену",min:"0"},on:{input:function(e){return t.changeField(t.$options.FIELDS_NAME.price)}},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",t._n(e))},expression:"form.price"}}),e("base-label",{staticClass:"the-default-log__label"},[t._v(" "+t._s(t.form.price||0)+" ")])],1),e("div",{staticClass:"the-default-log__row-item"},[e("base-input",{attrs:{label:"Кол-во",placeholder:"Введите кол-во",min:"0"},on:{input:function(e){return t.changeField(t.$options.FIELDS_NAME.qty)}},model:{value:t.form.qty,callback:function(e){t.$set(t.form,"qty",t._n(e))},expression:"form.qty"}}),e("base-label",{staticClass:"the-default-log__label"},[t._v(" "+t._s(t.form.qty||0)+" ")])],1),e("div",{staticClass:"the-default-log__row-item"},[e("base-input",{attrs:{label:"Сумма",placeholder:"Введите сумму",min:"0"},on:{input:function(e){return t.changeField(t.$options.FIELDS_NAME.amount)}},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",t._n(e))},expression:"form.amount"}}),e("base-label",{staticClass:"the-default-log__label"},[t._v(" "+t._s(t.form.amount||0)+" ")])],1),e("div",{staticClass:"the-default-log__row-item"},[e("base-button",{on:{click:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[t._v(" Отправить данные ")]),e("base-label",{staticClass:"the-default-log__label"},[t._v(" "+t._s(t.localStorageData)+" ")])],1)]),e("div",{staticClass:"the-default-log__logs-container"},[e("base-card",[e("log-list",{attrs:{"log-items":t.reverseLogEvents}})],1)],1)])},r=[],i=(a("14d9"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"base-card"},[t._t("default")],2)}),c=[],u={name:"BaseCard"},m=u,f=(a("652e"),a("2877")),p=Object(f["a"])(m,i,c,!1,null,"6b92abe0",null),d=p.exports,_=function(){var t=this,e=t._self._c;return e("button",t._g({staticClass:"base-button"},t.$listeners),[t._t("default")],2)},h=[],g={name:"BaseButton"},b=g,v=(a("fddc"),Object(f["a"])(b,_,h,!1,null,"4edef698",null)),E=v.exports,S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"base-label"},[t._t("default")],2)},y=[],L={name:"BaseLabel"},O=L,C=Object(f["a"])(O,S,y,!1,null,null,null),T=C.exports,A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"base-input"},[e("label",[e("div",{staticClass:"base-input__label"},[t._v(" "+t._s(t.label)+" ")]),e("input",t._b({staticClass:"base-input__input",attrs:{placeholder:t.placeholder,type:t.type},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}},"input",t.$attrs,!1))])])},N=[],I={name:"BaseInput",props:{value:{type:[String,Number],default:0},type:{type:String,default:"number"},placeholder:{type:String,default:""},label:{type:String,default:""}}},D=I,F=(a("b141"),Object(f["a"])(D,A,N,!1,null,"23931dc7",null)),q=F.exports,w=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"log-list"},t._l(t.logItems,(function(t,a){return e("log-item",{key:`${t.date}-${a}`,attrs:{item:t}})})),1)},$=[],x=function(){var t=this,e=t._self._c;return e("li",{staticClass:"log-item",class:t.classes},[e("span",[t._v(t._s(t.item.date))]),t._v(" • "),e("span",[t._v(t._s(t.item.message))]),t._v(" • "),e("span",[t._v(t._s(t.item.data))])])},j=[];const R="logData",G={UPDATES_FIELDS:"Поля обновлены",SAVE_RESULTS:"Результат сохранен",ERROR_MESSAGE:"Сумма должна быть четной",CLICK_ON_SAVE:"Кнопка отправить данные нажата"},V={success:"success",error:"error"};var B={name:"LogItem",props:{item:{type:Object,required:!0}},computed:{classes(){const t="log-item";return{[`${t}--${V.success}`]:this.item.type===V.success,[`${t}--${V.error}`]:this.item.type===V.error}}}},M=B,k=(a("56c8"),Object(f["a"])(M,x,j,!1,null,"16d0bf12",null)),P=k.exports,J={name:"LogList",components:{LogItem:P},props:{logItems:{type:Array,default:()=>[]}}},U=J,K=Object(f["a"])(U,w,$,!1,null,null,null),z=K.exports;function H(t,e){let a=null;return(...s)=>{a&&clearTimeout(a),a=setTimeout(()=>{t(...s)},e)}}class Q{static setItem(t,e){localStorage.setItem(t,JSON.stringify(e))}static getItem(t){const e=localStorage.getItem(t);return JSON.parse(e)}}const W={price:"price",qty:"qty",amount:"amount"};var X={name:"TheDefaultLog",components:{BaseCard:d,BaseButton:E,BaseInput:q,BaseLabel:T,LogList:z},data(){return{form:{price:0,qty:0,amount:0},nonce:0,logEvents:[],localStorageData:"",firstFieldChangeName:""}},computed:{reverseLogEvents(){return[...this.logEvents].reverse()}},methods:{changeField(t){this.firstFieldChangeName||(this.firstFieldChangeName=t),H(this.calculationOfFormFields(t),300)},calculationOfFormFields(t){if(this.firstFieldChangeName){const{price:e,qty:a,amount:s}=this.form,o=this.firstFieldChangeName===W.price,n=this.firstFieldChangeName===W.qty,l=t===W.amount;l?(o?this.form.price=s/a:e&&n?this.form.qty=s/e:e&&a&&(this.form.price=s/a,this.form.qty=s/e),this.form.amount=s):this.form.amount=e*a}const e=this.getEventItem(G.UPDATES_FIELDS);this.setLogEvent(e)},getEventItem(t,e=V.success){return{data:this.form,type:e,message:t}},setLogEvent(t){const{data:e,type:a,message:s}=t,o=`${(new Date).toLocaleDateString()} - ${(new Date).toLocaleTimeString()}`,n={date:o,data:JSON.stringify(e),type:a,message:s};this.logEvents.push(n)},onSubmit(){const t=this.getEventItem(G.CLICK_ON_SAVE);this.setLogEvent(t),this.saveToLoacaleStorage()},saveToLoacaleStorage(){const{amount:t}=this.form;setTimeout(()=>{if(t%2===0){this.nonce++;const t={...this.form,nonce:this.nonce};this.localStorageData=JSON.stringify(t),Q.setItem(R,t);const e={data:t,type:V.success,message:G.SAVE_RESULTS};this.setLogEvent(e)}else{const t=this.getEventItem(G.ERROR_MESSAGE,V.error);this.setLogEvent(t)}},1e3)}},created(){if(this.localStorageData=Q.getItem(R)||"",this.localStorageData){const{price:t,qty:e,amount:a,nonce:s}=this.localStorageData;this.form.price=t,this.form.qty=e,this.form.amount=a,this.nonce=s}},FIELDS_NAME:W},Y=X,Z=(a("bae9"),Object(f["a"])(Y,l,r,!1,null,"11ed3952",null)),tt=Z.exports,et=function(){var t=this,e=t._self._c;return e("base-card",{staticClass:"the-default-log"},[e("form",{staticClass:"the-default-log__row"},[e("div",{staticClass:"the-default-log__row-item"},[e("base-input",{attrs:{label:"Цена",placeholder:"Введите цену",min:"0"},on:{input:function(e){return t.changeField(t.$options.FIELDS_NAME.price)}},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",t._n(e))},expression:"form.price"}}),e("base-label",{staticClass:"the-default-log__label"},[t._v(" "+t._s(t.form.price||0)+" ")])],1),e("div",{staticClass:"the-default-log__row-item"},[e("base-input",{attrs:{label:"Кол-во",placeholder:"Введите кол-во",min:"0"},on:{input:function(e){return t.changeField(t.$options.FIELDS_NAME.qty)}},model:{value:t.form.qty,callback:function(e){t.$set(t.form,"qty",t._n(e))},expression:"form.qty"}}),e("base-label",{staticClass:"the-default-log__label"},[t._v(" "+t._s(t.form.qty||0)+" ")])],1),e("div",{staticClass:"the-default-log__row-item"},[e("base-input",{attrs:{label:"Сумма",placeholder:"Введите сумму",min:"0"},on:{input:function(e){return t.changeField(t.$options.FIELDS_NAME.amount)}},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",t._n(e))},expression:"form.amount"}}),e("base-label",{staticClass:"the-default-log__label"},[t._v(" "+t._s(t.form.amount||0)+" ")])],1),e("div",{staticClass:"the-default-log__row-item"},[e("base-button",{on:{click:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[t._v(" Отправить данные ")]),e("base-label",{staticClass:"the-default-log__label"},[t._v(" "+t._s(t.localStorageData)+" ")])],1)]),e("div",{staticClass:"the-default-log__logs-container"},[e("base-card",[e("log-list",{attrs:{"log-items":t.reverseLogEvents}})],1)],1)])},at=[],st=a("2f62");const ot={price:"price",qty:"qty",amount:"amount"};var nt={name:"TheVuexLog",components:{BaseCard:d,BaseButton:E,BaseInput:q,BaseLabel:T,LogList:z},data(){return{form:{price:0,qty:0,amount:0},firstFieldChangeName:""}},computed:{...Object(st["c"])("logs",["reverseLogEvents","localStorageData"])},methods:{...Object(st["d"])("logs",["SET_LOG_EVENT"]),...Object(st["b"])("logs",["SAVE_TO_LOCALE_STORAGE","INIT_LOCALESTORAGE"]),changeField(t){this.firstFieldChangeName||(this.firstFieldChangeName=t),H(this.calculationOfFormFields(t),300)},calculationOfFormFields(t){if(this.firstFieldChangeName){const{price:e,qty:a,amount:s}=this.form,o=this.firstFieldChangeName===ot.price,n=this.firstFieldChangeName===ot.qty,l=t===ot.amount;l?(o?this.form.price=s/a:e&&n?this.form.qty=s/e:e&&a&&(this.form.price=s/a,this.form.qty=s/e),this.form.amount=s):this.form.amount=e*a}const e=this.getEventItem(G.UPDATES_FIELDS);this.SET_LOG_EVENT(e)},getEventItem(t,e=V.success){return{data:this.form,type:e,message:t}},onSubmit(){const t=this.getEventItem(G.CLICK_ON_SAVE);this.SET_LOG_EVENT(t),this.SAVE_TO_LOCALE_STORAGE(this.form)}},created(){if(this.INIT_LOCALESTORAGE(),this.localStorageData){const{price:t,qty:e,amount:a,nonce:s}=this.localStorageData;this.form.price=t,this.form.qty=e,this.form.amount=a,this.nonce=s}},FIELDS_NAME:ot},lt=nt,rt=(a("152d"),Object(f["a"])(lt,et,at,!1,null,"7936596d",null)),it=rt.exports,ct={name:"App",components:{TheDefaultLog:tt,TheVuexLog:it}},ut=ct,mt=Object(f["a"])(ut,o,n,!1,null,null,null),ft=mt.exports;const pt={nonce:0,logEvents:[],localStorageData:""},dt={reverseLogEvents:t=>[...t.logEvents].reverse(),localStorageData:t=>t.localStorageData},_t={SET_LOG_EVENT(t,e){const{data:a,type:s,message:o}=e,n=`${(new Date).toLocaleDateString()} - ${(new Date).toLocaleTimeString()}`,l={date:n,data:JSON.stringify(a),type:s,message:o};t.logEvents.push(l)},INC_NONCE(t){t.nonce++},SET_LOCALESTORAGE_DATA(t,e){t.localStorageData=e}},ht={SAVE_TO_LOCALE_STORAGE({commit:t,state:e},a){setTimeout(()=>{if(a.amount%2===0){t("INC_NONCE");const s={...a,nonce:e.nonce};t("SET_LOCALESTORAGE_DATA",JSON.stringify(s)),Q.setItem(R,s);const o={data:a,type:V.success,message:G.SAVE_RESULTS};t("SET_LOG_EVENT",o)}else{const e={data:a,type:V.error,message:G.ERROR_MESSAGE};t("SET_LOG_EVENT",e)}},1e3)},INIT_LOCALESTORAGE({commit:t}){const e=Q.getItem(R)||"";t("SET_LOCALESTORAGE_DATA",e)}};var gt={namespaced:!0,state:pt,getters:dt,mutations:_t,actions:ht};s["a"].use(st["a"]);var bt=new st["a"].Store({modules:{logs:gt}});s["a"].config.productionTip=!1,new s["a"]({store:bt,render:t=>t(ft)}).$mount("#app")},"5d1d":function(t,e,a){},"652e":function(t,e,a){"use strict";a("5d1d")},9864:function(t,e,a){},a930:function(t,e,a){},b141:function(t,e,a){"use strict";a("dc14")},bae9:function(t,e,a){"use strict";a("db8e")},db8e:function(t,e,a){},dc14:function(t,e,a){},fddc:function(t,e,a){"use strict";a("9864")}});
//# sourceMappingURL=app.e2197d51.js.map